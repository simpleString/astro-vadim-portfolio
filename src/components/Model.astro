<div class="h-screen max-w-2xl mx-auto">
  This is a model component

  <div id="container" class="w-full h-full"></div>
</div>

<script>
  import * as THREE from "three";
  import { GLTFLoader } from "three/examples/jsm/loaders/GLTFLoader.js";

  const container = document.getElementById("container")!;

  const renderer = new THREE.WebGLRenderer({
    antialias: true,
    alpha: true,
  });

  renderer.setPixelRatio(window.devicePixelRatio);
  renderer.setSize(container.clientWidth, container.clientHeight);
  renderer.outputEncoding = THREE.sRGBEncoding;
  container.appendChild(renderer.domElement);

  const loader = new GLTFLoader();

  const scene = new THREE.Scene();

  const target = new THREE.Vector3(-0.5, 1.2, 0);

  const initialCameraPosition = new THREE.Vector3(
    20 * Math.sin(0.2 * Math.PI),
    10,
    20 * Math.cos(0.2 * Math.PI)
  );

  const scale = container.clientHeight * 0.005 + 4.8;

  const camera = new THREE.OrthographicCamera(
    -scale,
    scale,
    scale,
    -scale,
    0.01,
    1000
  );

  camera.position.copy(initialCameraPosition);
  camera.position.y = 10;
  camera.lookAt(target);

  const ambientLight = new THREE.AmbientLight(0xcccccc, 1);
  scene.add(ambientLight);

  loader.load(
    "./dog.glb",
    function (gltf) {
      const model = gltf.scene;
      model.position.x = 0;
      model.position.y = 0;
      model.receiveShadow = false;
      model.castShadow = false;
      scene.add(model);
    },
    undefined,
    function (error) {
      console.error(error);
    }
  );

  renderer.render(scene, camera);

  function animate() {
    requestAnimationFrame(animate);
    renderer.render(scene, camera);
  }
  animate();
</script>
